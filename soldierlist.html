<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <!--#include virtual="inc/meta.inc" -->
    <title>这三国 你从未见过-真龙霸业官方网站-腾讯游戏</title>
    <!-- 页面设计：微聚cp | 页面制作：微聚cp | 创建：2018-02-11 -->
    <link rel="stylesheet" href="css/sidebar.css">
    <style>
        /*主体部分的css*/
        /*侧边栏*/
        .list-wrap .list {height: 1034px;background-image:url(ossweb-img/list-bottom.jpg);background-repeat:  no-repeat;background-position:  bottom;}
        .list .nav {padding: 0 180px;}
        .list .nav li{width: 40px;}
        .soliders {margin-top: 55px;}
        .soliders ul {display: none;}
        .soliders ul li {position: relative;float: left;width: 438px;height: 117px;margin-bottom: 35px;background: url(ossweb-img/css_sp.png) no-repeat -15px -13px;}
        .soliders ul li.right {margin-left: 24px;}
        .soliders ul li.center {margin-left: 220px;}
        .soliders ul li strong {position: relative;left: 45px;top:-10px;font-size: 104px;color: #74788b;font-weight: bold;z-index: 2;}
        .soliders ul li span {position: relative;z-index: 99;float: right;width: 110px;font-size: 24px;color: #fff;margin: 40px 80px 0 0;}
        .soliders ul li i{float: right;width: 33px;height: 32px;margin-right: -140px;margin-top: 41px;background: url(ossweb-img/css_sp.png) no-repeat -61px -212px;}
        .soliders ul li img {position: absolute;top:0;left: 75px;z-index: 55;}
        .soliders ul li.three img {left: 45px;}
        .soliders ul li:hover {background: url(ossweb-img/css_sp.png) no-repeat -489px -13px;}
        .soliders ul li:hover strong {color: #cfb983;}
    </style>
</head>
<body>
    <div class="main">
        <!--导航-->
        <!--#include virtual="inc/head.inc" -->

        <!--主体部分-->
        <div class="container">
            <div class="list-wrap clearfix">
                <!--侧边栏-->
                <!--#include virtual="inc/sidebar.inc"-->
                <!--列表页-->
                <div class="list fl">
                    <div class="head clearfix">
                        <h2>兵种列表 <span>CORPS</span></h2>
                        <a href="index.html" onclick="PTTSendClick('btn','back','返回首页');">返回首页</a>
                    </div>
                    <ul class="nav clearfix">
                        <li class="on">步兵</li>
                        <li>骑兵</li>
                        <li>弓兵</li>
                        <li class="last">车兵</li>
                    </ul>
                    <div class="soliders">
                        <ul class="clearfix" style="display: block;">
                            <li>
                                <a href="javascript:;" onclick="PTTSendClick('btn','qita','其他1');">
                                    <strong>1</strong>
                                    <img src="ossweb-img/introduction/1.png" alt="">
                                    <span>轻甲步兵</span>
                                    <i></i>
                                </a>
                            </li>
                            <li class="right">
                                <a href="javascript:;" onclick="PTTSendClick('btn','qita','其他2');">
                                    <strong>2</strong>
                                    <img src="ossweb-img/introduction/2.png" alt="">
                                    <span>轻甲步兵</span>
                                    <i></i>
                                </a>
                            </li>
                            <li class="three">
                                <a href="javascript:;" onclick="PTTSendClick('btn','qita','其他3');">
                                    <strong>3</strong>
                                    <img src="ossweb-img/introduction/3.png" alt="">
                                    <span>轻甲步兵</span>
                                    <i></i>
                                </a>
                            </li>
                            <li class="right">
                                <a href="javascript:;" onclick="PTTSendClick('btn','qita','其他4');">
                                    <strong>4</strong>
                                    <img src="ossweb-img/introduction/4.png" alt="">
                                    <span>轻甲步兵</span>
                                    <i></i>
                                </a>
                            </li>
                            <li class="center">
                                <a href="javascript:;" onclick="PTTSendClick('btn','qita','其他5');">
                                    <strong>5</strong>
                                    <img src="ossweb-img/introduction/5.png" alt="">
                                    <span>轻甲步兵</span>
                                    <i></i>
                                </a>
                            </li>
                        </ul>
                    </div>

                </div>
            </div>

        </div>
    </div>
</body>
</html>
<!--#include virtual="inc/foot.inc" -->
<script src="//ossweb-img.qq.com/images/js/PTT/ping_tcss_tgideas_https_min.js"></script>
<script>
    //此段代码不能放到外链JS中，
    var setSite = { //设置网站属性
        siteType: "os", //必填项:"os"代表是官网，如果不是，则填写actName例如a20160701xxx
        pageType: "soldierlist", //必填项:本页面的定位；按照页面含义填写例如main||list||detail||download||share||page1||pageN
        pageName: "兵种列表", //必填项:页面中文名
        osact: 1, //选填项:是否是官网专题(在官网运营的专题)boolean；默认是0；非微社区页面均是1；可以在链接上加入参数osact=1来灵活设置
        ingame: 0, //选填项:是否投放在游戏APP内boolean；默认是0；可以在链接上加入参数ingame=1来灵活设置
        stayTime: 0 //选填项:是否需要统计停留时长boolean；默认是0
    }
    if (typeof (pgvMain) == 'function') pgvMain();//千万不能忘记！

    function getUrlParam(url,parm) {
        var reg = new RegExp("(^|&)" + parm + "=([^&]*)(&|$)");
        var r = url.substr(url.indexOf("\?") + 1).match(reg);
        if (r != null) return unescape(r[2]);
        return null;
    }


    var detailID = getUrlParam(location.href,"id") || 0;

    $(".nav li").eq(detailID).addClass("on").siblings().removeClass("on");
    (function(){
// 兵种数据对接
        var data_arr=[[[],[],[]],[[],[],[]],[[],[],[]],[[],[],[]]];
        var arr = ["","right","three","right","center"]
        var render = function(num){
            var _li = "";
            for(var i = 0, len = data_arr[num][0].length;i < len;i++){

                _li += "<li class="+arr[i]+">\n" +
                    "                                <a href=\"soldierdetail.html?id="+data_arr[num][0][i]+"\" target='_blank'>\n" +
                    "                                    <strong>"+(i+1)+"</strong>\n" +
                    "                                    <img src=\""+data_arr[num][2][i]+"\" >\n" +
                    "                                    <span>"+data_arr[num][1][i]+"</span>\n" +
                    "                                    <i></i>\n" +
                    "                                </a>\n" +
                    "                            </li>"
            }
            $ul = $('<ul class="clearfix" style="display: block;">\n' + _li +
                '                        </ul>')
            $(".soliders").html($ul);
        }
        var bz_data = {}
        $.ajax({
            type: "get",
            url: "//3.qq.com/zlkdatasys/data_zlk_bzlby.json?"+Math.random(),
            async:true,
            dataType: "jsonp",
            jsonp: "callback",//传递给请求处理程序或页面的，用以获得jsonp回调函数名的参数名(一般默认为:callback)
            jsonpCallback:"callback",//自定义的jsonp回调函数名称，默认为jQuery自动生成的随机函数名，也可以写"?"，jQuery会自动为你处理数据
            success: function(data){
                bz_data = data.bzlb_ba;
                console.log(data)
                var ele_arr=[[],[],[],[]],
                    //arr[0]: 步兵
                    //arr[0]: 骑兵
                    //arr[0]: 弓兵
                    //arr[0]: 车兵
                    category = "",
                    type = "",
                    pic_url = "",
                    str = "",
                    num = 0;
                for(var i = 0,len = bz_data.length;i < len;i++){
                    category = bz_data[i]["bzlx_ac"];
                    type = bz_data[i]["bzmc_66"];
                    num = bz_data[i]["bzid_7f"];
                    pic_url = bz_data[i]["bztx_3d"];
                    if(category == "步兵"){
                        data_arr[0][0].push(num)
                        data_arr[0][1].push(type)
                        data_arr[0][2].push(pic_url)
                    }else if(category == "骑兵"){
                        data_arr[1][0].push(num)
                        data_arr[1][1].push(type)
                        data_arr[1][2].push(pic_url)
                    }else if(category == "弓兵"){
                        data_arr[2][0].push(num)
                        data_arr[2][1].push(type)
                        data_arr[2][2].push(pic_url)
                    }else{
                        data_arr[3][0].push(num)
                        data_arr[3][1].push(type)
                        data_arr[3][2].push(pic_url)
                    }
                }
                render(detailID);
                console.log(data_arr)
            }
        });

        // tab栏切换
        $(".nav li").on("click",function () {
            var index = $(this).index();
            console.log(index)
            $(this).addClass("on").siblings().removeClass("on");
            render(index);
        });




    })();

</script>
